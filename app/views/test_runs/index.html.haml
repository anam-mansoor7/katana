- breadcrumb :tracked_branch, current_project, @tracked_branch

- content_for :page_title do
  = @tracked_branch.branch_name

.panel.panel-default
  .panel-body
    .row
      .col-md-12.col-sm-12.col-xs-12
        .pull-right
          = link_to new_project_branch_test_run_path, method: :post, action: :create do
            %button.btn.btn-icon.btn-info.m-b-5.w-md
              %i.fa.fa-plus.m-r-5
              %span= 'Add a new run'

        %table.table
          %thead
            %tr
              %th= "Test Run"
              %th= "Commit message (SHA)"
              %th= "Status"
              %th= "Total run time"
              %th= "Actions"
          %tbody
            - @tracked_branch.test_runs.each do |test_run|
              %tr
                %td= link_to "##{test_run.id}",
                  project_branch_test_run_path(current_project, test_run.tracked_branch_id, test_run)
                %td
                  = test_run.decorate.commit_message
                  %br
                  %i= test_run.decorate.commit_info
                %td
                  %span{class: test_run.status.css_class}= test_run.status.text
                %td
                  - if test_run.total_running_time
                    = distance_of_time_in_words(0, test_run.total_running_time, include_seconds: true)
                %td
                  = render partial: 'test_run_actions', locals: { test_run: test_run }
